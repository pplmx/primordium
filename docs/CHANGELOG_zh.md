# 修订历史 - Primordium (原初之境)

[English](../CHANGELOG.md)

本文件记录了 **Primordium** 项目的所有重大变更。本项目遵循基于阶段的演进式开发周期。

---

## [阶段 11: 社会结构 (Social Structures)] - 2026-01-21

### 进化跃迁：信息素、部落与合作

本阶段通过化学通信、亲缘识别和合作行为引入涌现社会行为。

#### ✨ 新特性

- **信息素系统**：实体留下持久化学踪迹：
  - **食物信息素**：进食时沉积，吸引觅食者
  - **危险信息素**：杀戮地点沉积，警告掠食者存在
  - 信息素随时间衰减（每tick衰减0.5%）
- **部落形成**：基于颜色的亲缘识别：
  - 颜色相近的实体（RGB距离<60）形成部落
  - 同部落成员永不互相攻击
- **领地行为**：实体在出生地附近攻击性提高50%
- **能量分享**：高能量实体可与饥饿邻居分享能量
  - 新增"分享"状态（♣）表示主动分享
- **扩展神经网络**：6输入 → 6隐藏 → 5输出：
  - 新增输入：信息素强度、部落密度
  - 新增输出：分享意图

#### 🛠️ 技术成就

- **信息素网格**：高效网格化信息素存储与衰减
- **Vec神经网络**：数组转Vec以支持serde序列化
- **社交符号**：新增分享符号（♣）和绿色状态颜色

---

## [阶段 10: 生态动力学 (Ecosystem Dynamics)] - 2026-01-21

### 演进飞跃：地形、地理与季节

此阶段通过地形系统和季节循环引入环境异质性，实现涌现式迁徙模式。

#### ✨ 功能特性

- **地形系统**：程序化生成的世界地形，包含独特生态区：
  - **山脉** (▲)：移动速度降低 50%，无食物生成
  - **河流** (≈)：移动速度提升 50%
  - **绿洲** (◊)：食物生成率 ×3，吸引迁徙
- **季节循环**：动态四季系统，影响生态平衡：
  - **春天**：食物 ×1.5，代谢 ×0.8（生长期）
  - **夏天**：食物 ×1.0，代谢 ×1.2（活跃期）
  - **秋天**：食物 ×1.2，代谢 ×1.0（收获期）
  - **冬天**：食物 ×0.5，代谢 ×1.5（生存期）
- **地形感知 AI**：实体根据脚下地形自动调整移动速度
- **地理食物分布**：食物自然聚集在绿洲周围

#### 🛠️ 技术成就

- **噪声生成**：多八度值噪声实现自然地形分布
- **分层渲染**：地形作为背景层绘制在实体之前

---

## [阶段 9: 全知之眼 (The Omniscient Eye)] - 2026-01-21

### 演进飞跃：深度分析与可视化叙事

此阶段引入全面的世界分析系统和叙事机制，让模拟世界栩栩如生。

#### ✨ 功能特性

- **纪元系统 (Era System)**：集成了由种群规模驱动的状态机，叙述世界演进纪元（创世、扩张、黄金时代、衰落等）。
- **名人堂 (Hall of Fame)**：实时排行榜，追踪模拟中适应度最高的前 3 名生物。
- **可视化叙事**：状态感知符号（†♥♦●）和基于生理状态的动态颜色映射。
- **高级分析**：滚动脑熵（香农熵）和平均寿命指标，用于监控生物多样性。
- **种群动态**：双火花线系统，实时可视化种群健康状况与硬件压力对比。

---

## [阶段 8: 顶级掠食者与基因协同 (Apex Predators & Genetic Synergy)] - 2026-01-20

### 演进飞跃：捕食、有性繁殖与数据可移植性

此阶段通过引入捕食者-猎物动态和基因交换机制，提升了模拟的复杂性。

#### ✨ 功能特性

- **进化捕食**：新增第 4 个神经输出"攻击性"，使生物能够捕食其他生物并获得巨大能量收益（80% 转化率）。
- **有性繁殖**：实现基因交叉，允许生物与附近配偶结合神经特征。
- **HexDNA 协议**：稳健的序列化格式，支持通过文本文件导出（`C` 键）和注入（`V` 键）生物。
- **高级感知**：重构感知系统，在多轮世界更新中避免借用检查器冲突。
- **增强编年史**：UI 事件日志现可叙述捕食事件和基因风暴。

---

## [阶段 7: 神圣交互 (Divine Interface)] - 2026-01-20

### 演进飞跃：交互与分类学

此阶段的重点是从被动观察者转变为主动的“数字神明”，引入了干预工具和复杂的物种分类系统。

#### ✨ 功能特性

- **鼠标驱动交互**：启用了完整的终端鼠标支持。用户现在可以点击单个生物来检查其神经状态、血统和特定的遗传特征。
- **程序化命名 engine**：每个生物现在都会根据其基因型分配一个唯一的、程序化生成的名称（例如 *Xylos-Tetra*, *Aether-7*），不再使用原始 UUID，以增强叙事感。
- **实时 UI 编年史**：实现了实时事件日志（“编年史”），叙述重大的演进事件（例如“第 5000 刻的大饥荒”，“传奇英雄 *Zenith* 已陨落”）。
- **神圣干预工具**：
  - **基因浪潮 (Genetic Surge)**：手动触发高变异爆发，强制种群快速适应。
  - **资源投放 (Food Injection)**：交互式放置资源簇，引导种群迁移。
- **基于基因型的物种聚类**：实现了 L2 范数距离算法，根据神经权重相似性将生物分组为“物种”，允许 UI 实时监控生物多样性及不同谱系的兴衰。

#### 🛠️ 技术成就

- **事件驱动的 UI 更新**：优化了事件循环，每帧排空事件队列，确保鼠标交互零延迟。
- **空间哈希查询**：集成了基于网格的空间分区系统，支持实时鼠标拾取并将感官查询复杂度优化至 $O(N \log N)$。

---

## [阶段 6: 沉浸 (Immersion)] - 2026-01-15

### 优化与部署阶段

专注于性能、灵活性和“屏幕保护程序”式的体验。

#### ✨ 功能特性

- **空间哈希优化 (Spatial Hash)**：使用动态空间哈希网格取代了 $O(N^2)$ 的邻居检查，支持在标准硬件上流畅运行 500+ 实体。
- **多模式支持**：
  - **标准模式**：具有完整仪表板的 TUI 界面。
  - **画境模式 (Screensaver)**：极简、无干扰的世界视图。
  - **静默模式 (Headless)**：用于数据挖掘和长期演进研究的高速后台模拟。
- **配置系统**：将所有模拟常量外部化到 `config.toml`，支持热调参。

---

## [阶段 5 & 5.5: 账本与区块链 (The Ledger & Blockchain)]

### 永恒历史与独立分析

确保每一个传奇的生命都被刻在数字穹顶之上。

#### ✨ 功能特性

- **JSONL 事件日志**：将每一次出生、死亡和环境变迁稳健地流式传输到 `logs/live.jsonl`。
- **传奇判定标准**：自动归档满足精英适应度阈值的“传奇生物”。
- **OpenTimestamps 锚定**：会话日志的 SHA-256 哈希被锚定到比特币区块链。
- **独立工具集**：
  - `primordium-ledger-analyzer`：生成详细报告及家谱可视化。
  - `primordium-ledger-verifier`：验证本地日志的完整性。

---

## [阶段 4: 神经觉醒 (Neural Awakening)]

### 向智能的过渡

用感官驱动的神经处理取代随机运动。

#### ✨ 功能特性

- **4x6x3 神经网络**：为每个生物实现多层感知器 (MLP)。
- **感官输入**：食物向量、能量储备、局部拥挤度。
- **实时大脑热图**：实时可视化当前选中生物的突触权重。

---

## [阶段 1-3: 原初与共振 (Genesis & Resonance)]

### 基础与硬件耦合

宇宙的诞生以及代码与硅片的耦合。

#### ✨ 功能特性

- **Ratatui 基础**：建立了高性能的 TUI 框架。
- **代谢能量循环**：复杂的生存系统，动作即能量。
- **硬件耦合气候**：将 CPU/RAM 负载转化为环境压力。

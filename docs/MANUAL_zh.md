# Primordium 用户手册 (原初之境)

欢迎来到 **Primordium**。这是一个先进的人工生命模拟系统，实体在这里进化、形成社会，并在动态的生态系统中为生存而挣扎。本手册将指导您了解模拟机制和控制方法。

---

## 🚀 快速开始

### 运行模式
Primordium 在两种环境中运行：
1. **终端 (TUI)**：经典、高性能的文本界面体验。
   ```bash
   primordium
   ```
2. **Web 浏览器 (WASM)**：通过 WebAssembly 实现的现代图形界面。
   (参见 [Web 指南](../www/README.md) 进行设置)

---

## 🎮 控制指南

### 全局按键
| 按键 | 动作 |
|-----|--------|
| `q` | **退出** 模拟 |
| `p` | **暂停/继续** 模拟 |
| `r` | **重置** 世界状态 (杀死所有实体) |
| `s` | 切换 **统计覆盖层** (TUI) |
| `h` | 切换 **帮助/控制** 菜单 |
| `w` | **保存** 模拟状态 |
| `l` | **加载** 模拟状态 |

### TUI 特有操作
| 操作 | 动作 |
|-----|--------|
| `左键点击` | 选择一个实体以查看其大脑/基因组 |
| `方向键` | 移动检查光标 |

---

## 👁️ 界面指南

### 实体与状态
实体由符号表示，指示其当前生理状态：
- `●` **觅食**：标准状态，正在寻找资源。
- `♦` **狩猎**：攻击状态，试图捕食其他实体。
- `♥` **交配**：高能量状态，准备繁殖。
- `†` **饥饿**：危急能量状态 (< 20%)，死亡风险极高。
- `◦` **幼体**：尚未发育成熟，无法进行繁殖。
- `☣` **感染**：携带病原体，会持续损耗能量并传染给邻近实体。
- `♣` **分享**：利他状态，向附近的部落成员提供能量。

### 颜色 (部落)
实体根据其 **基因部落** 显示颜色。
- 颜色相似（RGB 距离 < 60）的实体属于同一个 **部落**。
- 部落成员 **不** 会互相攻击。
- 如果神经网络的“分享”输出较高，部落成员可能会分享能量。

### 地形
- ` ` **平原**：标准移动速度。
- `≈` **河流** (蓝色)：移动速度更快 (1.5x)，代表水流。
- `▲` **山脉** (灰色)：移动缓慢 (0.5x)，无食物生长。
- `◊` **绿洲** (青绿色)：黄金地段，食物生成率 3x。
- `*` **食物** (绿色)：根据 RAM 占用情况生成的能量源。

---

## 🧬 进化机制

### 大脑 (神经网络)
每个实体都拥有一个代代进化的神经网络 (大脑)。
- **输入 (传感器)**:
  - 视觉 (附近的食物/实体)
  - 内部能量水平
  - 信息素强度 (嗅觉)
  - 部落密度
- **输出 (动作)**:
  - 移动 X / Y
  - 爆发 (冲刺)
  - 攻击 / 侵略性
  - 分享 (利他主义)

### 遗传学
当实体交配 (`M`) 时，通过遗传算法产生后代，混合父母的 DNA 并发生轻微突变。
- **属性**：速度、力量、新陈代谢、颜色。
- **大脑**：权重和偏差会发生突变。

### 信息素
实体会留下化学踪迹：
- **食物踪迹**：“我在这里发现了食物”（吸引同伴）。
- **危险踪迹**：“我死在这里”（警告同伴）。

---

## 🌍 生态系统

### 天气与循环
- **季节**：循环变化，影响食物生长率和新陈代谢（春、夏、秋、冬）。
- **昼夜循环**：世界在白昼与黑夜间交替。[新增]
  - **白昼**：高光照强度驱动最高食物生长率。
  - **黑夜**：生长极少；实体进入“休息”状态，静息代谢降低 40%。

### 病原体与免疫 [新增]
微观威胁会在模拟中产生并传播：
- **感染**：携带 `☣` 符号的实体会持续损失能量。
- **传染**：疾病通过邻近接触传播。
- **进化**：存活下来的实体会提升“免疫力”，并将其遗传给后代。

### 灾难 (神之接口)
偶发的随机事件或用户触发的灾难（如果启用了上帝模式）可以重塑种群。

---

## ⚔️ 游戏模式 (Game Modes)

使用 `--gamemode` 参数启动不同规则的模拟：

### 标准模式 (Standard)
`--gamemode standard`
经典的达尔文斗争。实体自然地战斗、合作和进化。

### 合作模式 (Cooperative)
`--gamemode coop`
**全球和平**。攻击行为被禁用。目标是最大化种群数量和效率。
- 适合研究群体动力学和利他主义。

### 大逃杀模式 (Battle Royale)
`--gamemode battle`
**适者生存的终极考验**。
- “安全区”随时间收缩。
- 安全区外的实体受到巨大伤害。
- 迫使种群在中心发生冲突。

---

## 🌌 多人联机 (Multiplayer)
Primordium 支持 **星际移民**。
- 如果一个实体在“在线”状态下移动出屏幕边缘，它将迁移到服务器。
- 服务器将实体路由到另一个已连接用户的模拟中。
- 请留意出现在世界边界的星际移民！

---

## 📚 技术维基 (Technical Wiki)
面向高级用户和模组制作者：
- [遗传学与 HexDNA](../docs/wiki/GENETICS.md)
- [神经网络架构](../docs/wiki/BRAIN.md)
- [生态系统公式](../docs/wiki/ECOSYSTEM.md)

---
*生成时间: 2026-01-21*
